<div class="ngx-add-modal">
  
  <div class="ngx-add-modal-body">
    <!-- {{ messageError| json}} [ngClass]="{' modal1':geojsonPOarcelle!=null,'message1' :messageError  != null}"  
    {{  second  | json}}
    {{ third | json}}
    {{   fiv | json}} -->
  <!-- {{second}} -->
    <ng-container *ngIf="messageError;else second">
    
      <h5 class="text-centre">{{messageError }} : {{jeojsonExp.properties.matricule}}</h5>
      <button style=" width: 50%; margin-left: 25%; margin-top: 13px;  " (click)="goToparcelle(jeojsonExp)" routerLinkActive="router-link-active"  class="btn btn-warning "> {{'administration_exploitatation.button_ressayer' | translate}}</button>
    </ng-container> 
    <ng-template #second>
        <ng-container *ngIf="geojsonPOarcelle;else third">
            <h6 style="    text-align: center;">{{'administration_exploitatation.title_add_par' | translate}}</h6>
          <table class="table table-striped" style="margin-bottom: -15px;">
         
            <tbody>
              <tr>
                <td >{{'administration_exploitatation.matricule' | translate}}</td>
                <td  ><input class=" form-control form-control-sm capteurInput" type="text" name="id capteur" id="id_capteur"  [(ngModel)]="geojsonPOarcelle.properties.matricule">
                </td>
                 
              </tr>
              <!-- <tr>
                <td>nombre de parcelles</td>
                <td><input class="form-control form-control-sm capteurInput" 
                    type="text" name="parametre"  id="parametre" 
                    value="" 
                   disabled>
                </td>
                 
              </tr> -->
              <tr>
                <td>{{'administration_exploitatation.superficie' | translate}}</td>
                <td> <input class="form-control form-control-sm capteurInput"
                     type="text" name="Culture" id="Culture"
                     
                     [value]="geojsonPOarcelle.properties.superficie.toFixed(2) + ' ha'"
                      disabled>
                </td>
                
              </tr>
          
              <tr>
                <td>{{'administration_exploitatation.type_de_culture' | translate}}</td>
                <td>    <nb-select  style="width: 100%;" placeholder="type culture" [(selected)]="selectedItem">
                  <nb-option (click)="selectTypeCuture('annuel')" value="annuel">Annuel</nb-option>
                  <nb-option (click)="selectTypeCuture('plantation')" value="plantation">Plantation</nb-option>
                  <!-- <nb-option (click)="selectTypeCuture('CULTURES FOURRAGERES')" value="CULTURES FOURRAGERES">CULTURES FOURRAGERES</nb-option>
                  <nb-option (click)="selectTypeCuture('CULTURES INDUSTRIELLES')" value="CULTURES INDUSTRIELLES">CULTURES INDUSTRIELLES</nb-option>
                  <nb-option (click)="selectTypeCuture('CULTURES OLEAGINEUSES')" value="CULTURES OLEAGINEUSES">CULTURES OLEAGINEUSES</nb-option>
                  <nb-option (click)="selectTypeCuture('HORTICULTURE')" value="HORTICULTURE">HORTICULTURE</nb-option>
                  <nb-option (click)="selectTypeCuture('ARBORICULTURE')" value="ARBORICULTURE">ARBORICULTURE</nb-option> -->
               
                </nb-select>
                </td>
                
              </tr>
              <tr>
                <td>{{'administration_exploitatation.culture' | translate}}</td>
                <td>             <nb-select  style="width: 100%;" placeholder="Culture" [(selected)]="selectedIprvince">
                  <nb-option  *ngFor="let cul of cultures" (click)="selectCulture(cul.culture)" value="{{cul.culture}}">{{cul.culture}}</nb-option>
                  
                </nb-select>
                </td>
                
              </tr>
              <tr>
                <td>{{'administration_exploitatation.variete' | translate}}</td>
                <td>             <input class="form-control form-control-sm capteurInput"
                  type="text" name="Culture" id="Culture" [(ngModel)]="geojsonPOarcelle.properties.variete">
                </td>
                
              </tr>
              <tr>
                <td>{{'administration_exploitatation.type_de_sol' | translate}}</td>
                <td>             <nb-select style="width: 100%;" placeholder="Type de Sol" [(selected)]="selectedItem">
                  <nb-option (click)="selectTypeSol('Argile')" value="Argile">Argile</nb-option>
                  <nb-option (click)="selectTypeSol('Argile limoneuse')" value="Argile limoneuse">Argile limoneuse</nb-option>
                  <nb-option (click)="selectTypeSol('Argile sableuse')" value="Argile sableuse">Argile sableuse</nb-option>
                  <nb-option (click)="selectTypeSol('Limon')" value="Limon">Limon</nb-option>
                  <nb-option (click)="selectTypeSol('Loam')" value="Loam">Loam</nb-option>
                  <nb-option (click)="selectTypeSol('Loam argileux')" value="Loam argileux">Loam argileux</nb-option>
                  <nb-option (click)="selectTypeSol('Loam argilo-limoneux')" value="Loam argilo-limoneux">Loam argilo-limoneux</nb-option>
                  <nb-option (click)="selectTypeSol('Loam argilo-sableux')" value="Loam argilo-sableux">Loam argilo-sableux</nb-option>
                  <nb-option (click)="selectTypeSol('Loam limoneux')" value="Loam limoneux">Loam limoneux</nb-option>
                  <nb-option (click)="selectTypeSol('Loam sableux')" value="Loam sableux">Loam sableux</nb-option>
                  <nb-option (click)="selectTypeSol('Lourd')" value="Lourd">Lourd</nb-option>
                  <nb-option (click)="selectTypeSol('Léger')" value="Léger">Léger</nb-option>
                  <nb-option (click)="selectTypeSol('Moyen')" value="Moyen">Moyen</nb-option>
                  <nb-option (click)="selectTypeSol('Sable')" value="Sable">Sable</nb-option>
                  <nb-option (click)="selectTypeSol('Sable limoneux')" value="Sable limoneux">Sable limoneux</nb-option>
                </nb-select>
                </td>
                
              </tr>
             
              
            </tbody>
          </table>
          <ngx-datepicker-draw [isAnnuel]="isAnnuel" [isPlantation]="isPlantation" (dateFrom)="dateFrom($event)" (dateTo)="dateTo($event)"></ngx-datepicker-draw>
           
           
          <button style="width: 100%;margin-bottom: 10px;"(click)="ajouterParcelle(geojsonPOarcelle)" routerLinkActive="router-link-active"  class="btn btn-primary ">{{'administration_exploitatation.button_confermer_et_ajoter' | translate}} </button>
          
          <button style="width: 49%;margin-right: 1%; " (click)="ajouterParcelle(geojsonPOarcelle)" routerLinkActive="router-link-active"  class="btn btn-info "><i class="fa fa-edit"></i> {{'administration_exploitatation.button_modifier' | translate}} </button>
          <button style="width: 49%;" (click)="ajouterParcelle(geojsonPOarcelle)" routerLinkActive="router-link-active"  class="btn btn-success "><i class="fa fa-check"></i> {{'administration_exploitatation.terminer' | translate}}</button>
         
          <!-- <button class="btn btn-danger ml-3" (click)="closeModal()">Close</button> -->
        </ng-container>
    </ng-template>
    <ng-template #third>
<ng-container *ngIf="expEdit;else fiv">
  <!-- <h6 style="text-align: center;">{{'administration_exploitatation.title_add_exp' | translate}}</h6> -->
<table class="table table-striped">
           
  <tbody>
   
    <tr>
      <td  >{{'administration_exploitatation.matricule' | translate}}</td>
      <td  ><input class=" form-control form-control-sm capteurInput" type="text" name="id capteur" id="id_capteur"  [(ngModel)]="expEdit.properties.matricule">
      </td>
    </tr>
    <!-- <tr>
      <td>nombre de parcelles</td>
      <td><input class="form-control form-control-sm capteurInput" 
          type="text" name="parametre"  id="parametre" 
          value="" 
         disabled>
      </td>
       
    </tr> -->
    <tr>
      <td>{{'administration_exploitatation.superficie' | translate}} </td>
      <td> <input class="form-control form-control-sm capteurInput"
           type="text" name="Culture" id="Culture"
           
           [value]="expEdit.properties.superficie.toFixed(2) +' ha'"
            disabled>
      </td>
      
    </tr>
    <tr>
      <td>{{'administration_exploitatation.region' | translate}}</td>
      <td> 
          <!-- <nb-select placeholder="Sélectionner votre région" [(selected)]="selectedIRegeion" disabled>
            <nb-option *ngFor="let reg of regions" (click)="selectRegion(reg.region)" value="{{reg.region}}">{{reg.region}}</nb-option>
          </nb-select> -->
          <nb-select  placeholder="Sélectionner votre région" (selectedChange)="selectRegion($event)" status="primary">
            <!-- <nb-option *ngFor="let language of translate.getLangs()" [value]="language">{{ language }}</nb-option> -->
            <nb-option  value="38">Oriental </nb-option>
            <nb-option  value="37">Tanger-Tétouan-Al Hoceima </nb-option>
            <nb-option  value="46">Guelmim-Oued Noun </nb-option>
            <nb-option  value="48">Eddakhla-Oued Eddahab </nb-option>
            <nb-option  value="41">Béni Mellal-Khénifra </nb-option>
            <nb-option  value="44">Drâa-Tafilalet </nb-option>
            <nb-option  value="43">Marrakech-Safi </nb-option>
            <nb-option  value="42">Grand Casablanca-Settat </nb-option>
            <nb-option  value="39">Fés-Meknés </nb-option>
            <nb-option  value="47">Laayoune-Sakia El Hamra </nb-option>
            <nb-option  value="40">Rabat-Salé-Kénitra </nb-option>
            <nb-option  value="45">Souss-Massa </nb-option>
          </nb-select>
      
      </td>
      
    </tr>
    
    <tr>
      <td>{{'administration_exploitatation.province' | translate}}</td>
    
          <nb-select placeholder="Sélectionner votre province" [(selected)]="selectedIprvince" disabled>
            <nb-option  *ngFor="let pv of province" (click)="selectProvance(pv.nom_province)" value="{{pv.nom_province}}">{{pv.nom_province}}</nb-option>
            
          </nb-select>
   
    </tr>
    
  </tbody>
</table>
<button (click)="editExp(expEdit)" routerLinkActive="router-link-active"  class="btn btn-primary "> Modifier l'exploitation </button>
</ng-container>
  
 
    </ng-template>
    <ng-template #fiv>
      <h6 style="text-align: center;">{{'administration_exploitatation.title_add_exp' | translate}}</h6>
      <table class="table table-striped">
           
        <tbody>
          <tr>
            <td  >{{'administration_exploitatation.matricule' | translate}}</td>
            <td  ><input class=" form-control form-control-sm capteurInput" type="text" name="id capteur" id="id_capteur"  [(ngModel)]="jeojsonExp.properties.matricule">
            </td>
             
          </tr>
          <!-- <tr>
            <td>nombre de parcelles</td>
            <td><input class="form-control form-control-sm capteurInput" 
                type="text" name="parametre"  id="parametre" 
                value="" 
               disabled>
            </td>
             
          </tr> -->
          <tr>
            <td>{{'administration_exploitatation.superficie' | translate}}  </td>
            <td> <input class="form-control form-control-sm capteurInput"
                 type="text" name="Culture" id="Culture"
                 
                 [value]="jeojsonExp.properties.superficie.toFixed(2) + ' ha'"
                  disabled>
            </td>
            
          </tr>
          <tr>
            <td>{{'administration_exploitatation.region' | translate}}</td>
            <td> 
                <!-- <nb-select  style="width: 100%;" placeholder="Sélectionner votre région" [(selected)]="selectedIRegeion">
                  <nb-option *ngFor="let reg of regions" (click)="selectRegion(reg.region)" value="{{reg.region}}">{{reg.region}}</nb-option>
                </nb-select> -->
                <nb-select style="width: 100%;"  placeholder="Sélectionner votre région" (selectedChange)="selectRegion($event)" status="primary">
                  <!-- <nb-option *ngFor="let language of translate.getLangs()" [value]="language">{{ language }}</nb-option> -->
                  <nb-option  value="38">Oriental </nb-option>
                  <nb-option  value="37">Tanger-Tétouan-Al Hoceima </nb-option>
                  <nb-option  value="46">Guelmim-Oued Noun </nb-option>
                  <nb-option  value="48">Eddakhla-Oued Eddahab </nb-option>
                  <nb-option  value="41">Béni Mellal-Khénifra </nb-option>
                  <nb-option  value="44">Drâa-Tafilalet </nb-option>
                  <nb-option  value="43">Marrakech-Safi </nb-option>
                  <nb-option  value="42">Grand Casablanca-Settat </nb-option>
                  <nb-option  value="39">Fés-Meknés </nb-option>
                  <nb-option  value="47">Laayoune-Sakia El Hamra </nb-option>
                  <nb-option  value="40">Rabat-Salé-Kénitra </nb-option>
                  <nb-option  value="45">Souss-Massa </nb-option>
                </nb-select>
            
            </td>
            
          </tr>
          
          <tr>
            <td>{{'administration_exploitatation.province' | translate}}</td>
          <td>
                <nb-select  style="width: 100%;" placeholder="Sélectionner votre province" [(selected)]="selectedIprvince">
                  <nb-option  *ngFor="let pv of province" (click)="selectProvance(pv.nom_province)" value="{{pv.nom_province}}">{{pv.nom_province}}</nb-option>
                  
                </nb-select>
         </td>
          </tr>
          
        </tbody>
      </table>
      <button style="width: 100%;margin-top: 10px;" (click)="goToparcelle(jeojsonExp)" routerLinkActive="router-link-active"  class=" btn btn-primary "><i class="fa fa-check"></i> {{'administration_exploitatation.button_confermer_et_ajoter' | translate}}</button>
 
  <button style="width: 100%;margin-top: 10px; "  (click)="goToparcelle('modifer')" routerLinkActive="router-link-active"  class="col-6 btn btn-info "><i class="fa fa-edit"></i> {{'administration_exploitatation.button_modifier' | translate}}</button>
  <button style="width: 100%;margin-top: 10px;" (click)="close()"  class=" col-6 btn btn-danger "><i class="fa fa-close"></i> Annuler</button>
     
</ng-template>
 
  </div>
</div>
<div class="ngx-add-modal-background"></div>
